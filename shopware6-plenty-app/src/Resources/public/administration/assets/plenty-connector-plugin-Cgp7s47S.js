const s=`<sw-page class="plenty-utility-page"> <template #smart-bar-header> <h2>{{ $tc('plenty-connector-utility.general.headline') }}</h2> </template> <template #content> <div class="plenty-utility-card"> <sw-card :title="$tc('plenty-connector-utility.cards.actions')"> <div class="plenty-utility-actions"> <sw-button :loading="isClearing" variant="primary" @click="clearCache"> {{ $tc('plenty-connector-utility.buttons.clearCache') }} </sw-button> <sw-button :loading="isSyncing" variant="ghost" @click="syncProducts"> {{ $tc('plenty-connector-utility.buttons.syncProducts') }} </sw-button> </div> <div v-if="lastMessage" class="plenty-utility-message"> {{ lastMessage }} </div> </sw-card> </div> </template> </sw-page>`,{Component:l}=Shopware;l.register("plenty-connector-utility-index",{template:s,data(){return{isClearing:!1,isSyncing:!1,lastMessage:null}},methods:{async clearCache(){var e,t,i,r;this.isClearing=!0,this.lastMessage=null;try{await this.$http.post("/api/_action/plenty/cache-clear"),this.lastMessage=this.$tc("plenty-connector-utility.messages.cacheCleared")}catch(a){this.lastMessage=((r=(i=(t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.errors)==null?void 0:i[0])==null?void 0:r.detail)||this.$tc("plenty-connector-utility.messages.cacheFailed")}finally{this.isClearing=!1}},async syncProducts(){var e,t,i,r;this.isSyncing=!0,this.lastMessage=null;try{await this.$http.post("/api/_action/plenty/sync-products"),this.lastMessage=this.$tc("plenty-connector-utility.messages.syncTriggered")}catch(a){this.lastMessage=((r=(i=(t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.errors)==null?void 0:i[0])==null?void 0:r.detail)||this.$tc("plenty-connector-utility.messages.syncFailed")}finally{this.isSyncing=!1}}}});const{Module:c}=Shopware;c.register("plenty-connector-utility",{type:"plugin",name:"plenty-connector-utility",title:"plenty-connector-utility.general.mainMenuItemGeneral",description:"Utility actions for Plentymarkets connector",color:"#0e71ba",routes:{index:{component:"plenty-connector-utility-index",path:"index",meta:{parentPath:"sw.settings.index"}}},settingsItem:[{group:"plugins",to:"plenty.connector.utility.index",label:"plenty-connector-utility.general.mainMenuItemGeneral"}]});const p=`<sw-page class="plenty-package-list"> <template #smart-bar-header> <h2>{{ $tc('plenty-package.list.textTitle') }}</h2> </template> <template #smart-bar-actions> <sw-button :routerLink="{ name: 'plenty.package.create' }" variant="primary"> {{ $tc('plenty-package.list.buttonAddPackage') }} </sw-button> </template> <template #content> <sw-entity-listing :repository="packageRepository" :items="packages" :columns="columns" :isLoading="isLoading" detailRoute="plenty.package.detail" @update-records="getList"> </sw-entity-listing> </template> </sw-page>`,{Component:d}=Shopware,{Criteria:u}=Shopware.Data;d.register("plenty-package-list",{template:p,inject:["repositoryFactory"],data(){return{packages:[],isLoading:!1,total:0,page:1,limit:25}},metaInfo(){return{title:this.$createTitle()}},computed:{packageRepository(){return this.repositoryFactory.create("plenty_package")},columns(){return[{property:"name",dataIndex:"name",label:this.$tc("plenty-package.list.columnName"),routerLink:"plenty.package.detail",inlineEdit:"string",allowResize:!0,primary:!0},{property:"targetAmount",dataIndex:"targetAmount",label:this.$tc("plenty-package.list.columnTargetAmount"),inlineEdit:"number",allowResize:!0},{property:"tokenReward",dataIndex:"tokenReward",label:this.$tc("plenty-package.list.columnTokenReward"),inlineEdit:"number",allowResize:!0},{property:"active",dataIndex:"active",label:this.$tc("plenty-package.list.columnActive"),inlineEdit:"boolean",allowResize:!0}]}},created(){this.getList()},methods:{getList(){this.isLoading=!0;const e=new u(this.page,this.limit);return this.packageRepository.search(e,Shopware.Context.api).then(t=>(this.packages=t,this.total=t.total,this.isLoading=!1,t)).catch(t=>{console.error("Error loading packages:",t),this.isLoading=!1,this.packages=[],this.total=0})},onChangeLanguage(){this.getList()}}});const m=`<sw-page class="plenty-package-detail"> <template #smart-bar-header> <h2 v-if="isCreateMode">{{ $tc('plenty-package.detail.textCreateTitle') }}</h2> <h2 v-else>{{ package.name }}</h2> </template> <template #smart-bar-actions> <sw-button :disabled="isLoading" @click="onCancel"> {{ $tc('plenty-package.detail.buttonCancel') }} </sw-button> <sw-button-process :isLoading="isLoading" :processSuccess="isSaveSuccessful" variant="primary" @click="onSave"> {{ $tc('plenty-package.detail.buttonSave') }} </sw-button-process> </template> <template #content> <sw-card-view> <sw-card :title="$tc('plenty-package.detail.cardTitleBasic')" :isLoading="isLoading"> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0px 30px"> <sw-text-field v-model="package.name" :label="$tc('plenty-package.detail.labelName')" :placeholder="$tc('plenty-package.detail.placeholderName')" :error="packageNameError" required> </sw-text-field> <sw-switch-field v-model="package.active" :label="$tc('plenty-package.detail.labelActive')"> </sw-switch-field> </sw-container> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0px 30px"> <sw-number-field v-model="package.targetAmount" :label="$tc('plenty-package.detail.labelTargetAmount')" :placeholder="$tc('plenty-package.detail.placeholderTargetAmount')" :error="packageTargetAmountError" numberType="float" :step="0.01" required> </sw-number-field> <sw-number-field v-model="package.tokenReward" :label="$tc('plenty-package.detail.labelTokenReward')" :placeholder="$tc('plenty-package.detail.placeholderTokenReward')" :error="packageTokenRewardError" numberType="int" required> </sw-number-field> </sw-container> </sw-card> <sw-card :title="$tc('plenty-package.detail.cardTitleCategories')" :isLoading="isLoading"> <sw-entity-multi-id-select v-model="package.categoryIds" :label="$tc('plenty-package.detail.labelCategories')" :placeholder="$tc('plenty-package.detail.placeholderCategories')" :repository="categoryRepository"> </sw-entity-multi-id-select> </sw-card> <sw-card :title="$tc('plenty-package.detail.cardTitleVisibility')" :isLoading="isLoading"> <sw-select-field v-model="package.visibilityType" :label="$tc('plenty-package.detail.labelVisibilityType')" :options="[ { value: 'all', label: $tc('plenty-package.detail.visibilityAll') }, { value: 'whitelist', label: $tc('plenty-package.detail.visibilityWhitelist') }, { value: 'blacklist', label: $tc('plenty-package.detail.visibilityBlacklist') } ]"> </sw-select-field> <sw-entity-multi-id-select v-if="package.visibilityType === 'whitelist'" v-model="package.allowedCustomerIds" :label="$tc('plenty-package.detail.labelAllowedCustomers')" :placeholder="$tc('plenty-package.detail.placeholderAllowedCustomers')" :repository="customerRepository"> </sw-entity-multi-id-select> <sw-entity-multi-id-select v-if="package.visibilityType === 'blacklist'" v-model="package.excludedCustomerIds" :label="$tc('plenty-package.detail.labelExcludedCustomers')" :placeholder="$tc('plenty-package.detail.placeholderExcludedCustomers')" :repository="customerRepository"> </sw-entity-multi-id-select> </sw-card> </sw-card-view> </template> </sw-page>`,{Component:g,Mixin:y}=Shopware,{Criteria:h}=Shopware.Data,{mapPropertyErrors:k}=Shopware.Component.getComponentHelper();g.register("plenty-package-detail",{template:m,inject:["repositoryFactory"],mixins:[y.getByName("notification")],data(){return{package:null,isLoading:!1,isSaveSuccessful:!1}},metaInfo(){return{title:this.$createTitle()}},computed:{packageRepository(){return this.repositoryFactory.create("plenty_package")},categoryRepository(){return this.repositoryFactory.create("category")},customerRepository(){return this.repositoryFactory.create("customer")},...k("package",["name","targetAmount","tokenReward"]),isCreateMode(){return this.$route.name==="plenty.package.create"}},created(){this.loadEntityData()},methods:{loadEntityData(){if(this.isLoading=!0,this.isCreateMode){this.package=this.packageRepository.create(),this.package.active=!0,this.package.visibilityType="all",this.package.categoryIds=[],this.package.allowedCustomerIds=[],this.package.excludedCustomerIds=[],this.isLoading=!1;return}const e=new h;this.packageRepository.get(this.$route.params.id,Shopware.Context.api,e).then(t=>{this.package=t,this.isLoading=!1})},onSave(){return this.isLoading=!0,this.isCreateMode&&this.package&&this.package.id&&delete this.package.id,this.packageRepository.save(this.package,Shopware.Context.api).then(()=>{this.isLoading=!1,this.isSaveSuccessful=!0,this.$router.push({name:"plenty.package.detail",params:{id:this.package.id}})}).catch(()=>{this.isLoading=!1,this.createNotificationError({message:this.$tc("plenty-package.detail.errorMessage")})})},onCancel(){this.$router.push({name:"plenty.package.list"})}}});const{Module:w}=Shopware;w.register("plenty-package",{type:"plugin",name:"plenty-package",title:"plenty-package.general.mainMenuItemGeneral",description:"Manage customer reward packages",color:"#ff3d58",routes:{list:{component:"plenty-package-list",path:"list",meta:{parentPath:"sw.settings.index"}},detail:{component:"plenty-package-detail",path:"detail/:id",meta:{parentPath:"plenty.package.list"}},create:{component:"plenty-package-detail",path:"create",meta:{parentPath:"plenty.package.list"}}},settingsItem:[{group:"plugins",to:"plenty.package.list",icon:"default-shopping-paper-bag-product",label:"plenty-package.general.mainMenuItemGeneral"}]});const b=`<sw-page class="plenty-token-product-list"> <template #smart-bar-header> <h2>{{ $tc('plenty-token-market.productList.textTitle') }}</h2> </template> <template #smart-bar-actions> <sw-button :routerLink="{ name: 'plenty.token.market.product-create' }" variant="primary"> {{ $tc('plenty-token-market.productList.buttonAddProduct') }} </sw-button> </template> <template #content> <sw-entity-listing :repository="productRepository" :items="products" :columns="columns" :isLoading="isLoading" detailRoute="plenty.token.market.product-detail" @update-records="getList"> </sw-entity-listing> </template> </sw-page>`,{Component:$,Mixin:f}=Shopware,{Criteria:o}=Shopware.Data;$.register("plenty-token-product-list",{template:b,inject:["repositoryFactory"],mixins:[f.getByName("listing")],data(){return{products:null,isLoading:!1,total:0}},metaInfo(){return{title:this.$createTitle()}},computed:{productRepository(){return this.repositoryFactory.create("plenty_token_product")},columns(){return[{property:"name",dataIndex:"name",label:this.$tc("plenty-token-market.productList.columnName"),routerLink:"plenty.token.market.product-detail",inlineEdit:"string",allowResize:!0,primary:!0},{property:"tokenPrice",dataIndex:"tokenPrice",label:this.$tc("plenty-token-market.productList.columnTokenPrice"),inlineEdit:"number",allowResize:!0},{property:"stock",dataIndex:"stock",label:this.$tc("plenty-token-market.productList.columnStock"),inlineEdit:"number",allowResize:!0},{property:"active",dataIndex:"active",label:this.$tc("plenty-token-market.productList.columnActive"),inlineEdit:"boolean",allowResize:!0}]}},created(){this.getList()},methods:{getList(){this.isLoading=!0;const e=new o(this.page,this.limit);return e.addSorting(o.sort("createdAt","DESC")),this.productRepository.search(e,Shopware.Context.api).then(t=>{this.products=t,this.total=t.total,this.isLoading=!1})},onChangeLanguage(){this.getList()}}});const L=`<sw-page class="plenty-token-product-detail"> <template #smart-bar-header> <h2 v-if="isCreateMode">{{ $tc('plenty-token-market.productDetail.textCreateTitle') }}</h2> <h2 v-else>{{ product.name }}</h2> </template> <template #smart-bar-actions> <sw-button :disabled="isLoading" @click="onCancel"> {{ $tc('plenty-token-market.productDetail.buttonCancel') }} </sw-button> <sw-button-process :isLoading="isLoading" :processSuccess="isSaveSuccessful" variant="primary" @click="onSave"> {{ $tc('plenty-token-market.productDetail.buttonSave') }} </sw-button-process> </template> <template #content> <sw-card-view> <sw-card :title="$tc('plenty-token-market.productDetail.cardTitleBasic')" :isLoading="isLoading"> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0px 30px"> <sw-text-field v-model="product.name" :label="$tc('plenty-token-market.productDetail.labelName')" :placeholder="$tc('plenty-token-market.productDetail.placeholderName')" :error="productNameError" required> </sw-text-field> <sw-switch-field v-model="product.active" :label="$tc('plenty-token-market.productDetail.labelActive')"> </sw-switch-field> </sw-container> <sw-textarea-field v-model="product.description" :label="$tc('plenty-token-market.productDetail.labelDescription')" :placeholder="$tc('plenty-token-market.productDetail.placeholderDescription')"> </sw-textarea-field> <sw-container columns="repeat(auto-fit, minmax(250px, 1fr))" gap="0px 30px"> <sw-number-field v-model="product.tokenPrice" :label="$tc('plenty-token-market.productDetail.labelTokenPrice')" :placeholder="$tc('plenty-token-market.productDetail.placeholderTokenPrice')" :error="productTokenPriceError" numberType="int" required> </sw-number-field> <sw-number-field v-model="product.stock" :label="$tc('plenty-token-market.productDetail.labelStock')" :placeholder="$tc('plenty-token-market.productDetail.placeholderStock')" numberType="int"> </sw-number-field> </sw-container> <sw-text-field v-model="product.imageUrl" :label="$tc('plenty-token-market.productDetail.labelImageUrl')" :placeholder="$tc('plenty-token-market.productDetail.placeholderImageUrl')"> </sw-text-field> </sw-card> </sw-card-view> </template> </sw-page>`,{Component:v,Mixin:x}=Shopware,{Criteria:C}=Shopware.Data,{mapPropertyErrors:S}=Shopware.Component.getComponentHelper();v.register("plenty-token-product-detail",{template:L,inject:["repositoryFactory"],mixins:[x.getByName("notification")],data(){return{product:null,isLoading:!1,isSaveSuccessful:!1}},metaInfo(){return{title:this.$createTitle()}},computed:{productRepository(){return this.repositoryFactory.create("plenty_token_product")},...S("product",["name","tokenPrice"]),isCreateMode(){return this.$route.name==="plenty.token.market.product-create"}},created(){this.loadEntityData()},methods:{loadEntityData(){if(this.isLoading=!0,this.isCreateMode){this.product=this.productRepository.create(),this.product.active=!0,this.product.stock=0,this.isLoading=!1;return}const e=new C;this.productRepository.get(this.$route.params.id,Shopware.Context.api,e).then(t=>{this.product=t,this.isLoading=!1})},onSave(){return this.isLoading=!0,this.productRepository.save(this.product,Shopware.Context.api).then(()=>{this.isLoading=!1,this.isSaveSuccessful=!0,this.$router.push({name:"plenty.token.market.product-detail",params:{id:this.product.id}})}).catch(()=>{this.isLoading=!1,this.createNotificationError({message:this.$tc("plenty-token-market.productDetail.errorMessage")})})},onCancel(){this.$router.push({name:"plenty.token.market.product-list"})}}});const R=`<sw-page class="plenty-token-order-list"> <template #smart-bar-header> <h2>{{ $tc('plenty-token-market.orderList.textTitle') }}</h2> </template> <template #content> <sw-entity-listing :repository="orderRepository" :items="orders" :columns="columns" :isLoading="isLoading" @update-records="getList"> </sw-entity-listing> </template> </sw-page>`,{Component:M,Mixin:T}=Shopware,{Criteria:n}=Shopware.Data;M.register("plenty-token-order-list",{template:R,inject:["repositoryFactory"],mixins:[T.getByName("listing")],data(){return{orders:null,isLoading:!1,total:0}},metaInfo(){return{title:this.$createTitle()}},computed:{orderRepository(){return this.repositoryFactory.create("plenty_token_order")},columns(){return[{property:"createdAt",dataIndex:"createdAt",label:this.$tc("plenty-token-market.orderList.columnDate"),allowResize:!0,primary:!0},{property:"customer.firstName",dataIndex:"customer.firstName,customer.lastName",label:this.$tc("plenty-token-market.orderList.columnCustomer"),allowResize:!0},{property:"tokenProduct.name",dataIndex:"tokenProduct.name",label:this.$tc("plenty-token-market.orderList.columnProduct"),allowResize:!0},{property:"tokenAmount",dataIndex:"tokenAmount",label:this.$tc("plenty-token-market.orderList.columnTokenAmount"),allowResize:!0},{property:"status",dataIndex:"status",label:this.$tc("plenty-token-market.orderList.columnStatus"),inlineEdit:"string",allowResize:!0}]}},created(){this.getList()},methods:{getList(){this.isLoading=!0;const e=new n(this.page,this.limit);return e.addSorting(n.sort("createdAt","DESC")),e.addAssociation("customer"),e.addAssociation("tokenProduct"),this.orderRepository.search(e,Shopware.Context.api).then(t=>{this.orders=t,this.total=t.total,this.isLoading=!1})},onChangeLanguage(){this.getList()}}});const{Module:I}=Shopware;I.register("plenty-token-market",{type:"plugin",name:"plenty-token-market",title:"plenty-token-market.general.mainMenuItemGeneral",description:"Manage Token Market products and orders",color:"#ffa500",routes:{"product-list":{component:"plenty-token-product-list",path:"products",meta:{parentPath:"sw.settings.index"}},"product-detail":{component:"plenty-token-product-detail",path:"product/detail/:id",meta:{parentPath:"plenty.token.market.product-list"}},"product-create":{component:"plenty-token-product-detail",path:"product/create",meta:{parentPath:"plenty.token.market.product-list"}},"order-list":{component:"plenty-token-order-list",path:"orders",meta:{parentPath:"sw.settings.index"}}},settingsItem:[{group:"plugins",to:"plenty.token.market.product-list",icon:"default-package-gift",label:"plenty-token-market.general.mainMenuItemProducts"},{group:"plugins",to:"plenty.token.market.order-list",icon:"default-shopping-basket",label:"plenty-token-market.general.mainMenuItemOrders"}]});
//# sourceMappingURL=plenty-connector-plugin-Cgp7s47S.js.map
